<!DOCTYPE html>
<html lang="zh-Hans">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" href="./style.css">
    <title>nav-demo</title>
</head>
<body>
    <header></header>

    <main>
        <div class="wrapper" id="main_kbd">

        </div>
    </main>

    <footer></footer>

    <script>

        //初始化hash
        var keys = {0: ['q', 'w', 'e', 'r', 't', 'y', 'u', 'i', 'o', 'p'], 
                    1: ['a', 's', 'd', 'f', 'g', 'h', 'j', 'k', 'l'], 
                    2: ['z', 'x', 'c', 'v', 'b', 'n', 'm'],
                    length: 3
                    }
                    
        var hash = {
            'q': 'qq.com', 
            'w': 'weibo.com', 
            'e': 'evernote.com',
            'r': 'r-project.org',
            't': 'taobao.com',
            'u': 'unsplash.com',
            'i': 'iqiyi.com',
            'o': 'omnigroup.com',
            'p': 'processon.com',
            'a': 'alibaba.com', 
            's': 'shadowsocks.org',
            'd': 'dribbble.com',
            'f': 'ifeng.com',
            'g': 'google.com',
            'h': 'huawei.com',
            'j': 'jianshu.com',
            'k': 'keep.com', 
            'l': 'lagou.com',
            'z': 'zhihu.com',
            'x': 'xunlei.com',
            'c': 'css-tricks.com',
            'v': 'v2ex.com',
            'b': 'bilibili.com',
            'n': 'namesilo.com',
            'm': 'xiaomi.com'
        }

        //取出保存的editWebsite覆盖默认的hash
        hashInlocalStorage = JSON.parse(localStorage.getItem('editWebsite') || 'null')
        if(hashInlocalStorage){
            hash = hashInlocalStorage
        }

        //遍历keys 生成kbd标签
        index = 0
        while(index < keys.length){
            div_kbd = document.createElement('div')
            main_kbd.appendChild(div_kbd)
            row = keys[index] //接受数组
            index2 = 0
            while(index2 < row.length){
                //生成kbd标签
                kbd = document.createElement('kbd')
                kbd.textContent = row[index2]
                div_kbd.appendChild(kbd)
                //生成button按钮
                button_kbd = document.createElement('button')
                button_kbd.textContent = 'Edit'
                kbd.appendChild(button_kbd)
                //增加编辑功能
                button_kbd.id = row[index2]
                button_kbd.onclick = function(inKbd){
                    key = inKbd.target.id
                    inWebsite = prompt('请输入网址')
                    hash[key] = inWebsite
                    //保存更改到localStorage
                    localStorage.setItem('editWebsite', JSON.stringify(hash))

                }

               index2 = index2 + 1
            }
            index = index + 1
        }

        //监听键盘
        document.onkeypress = function(inKbd){
            key = inKbd.key
            website = hash[key]
            //当前页面打开
            //location.href = 'http://' + website
            window.open('http://' + website, '_blank')
        }
    </script>

</body>
</html>